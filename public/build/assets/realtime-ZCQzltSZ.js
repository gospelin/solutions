import{P as m,E as p}from"./pusher-LyJa47xg.js";window.Pusher=m;document.addEventListener("DOMContentLoaded",()=>{window.Echo=new p({broadcaster:"pusher",key:"49e7f52d423a9c1d49e7f52d423a9c1de18d",cluster:"mt1",forceTLS:!0,encrypted:!0,authEndpoint:"/broadcasting/auth",auth:{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}});const c=document.querySelector('meta[name="auth-id"]').content;c?window.Echo.private(`admin.${c}`).listen("UserNotification",t=>{const n=document.getElementById("notificationList"),d=document.getElementById("notificationCount"),u=parseInt(d.textContent)||0,e=document.createElement("div");e.className="notification-item",e.dataset.id=t.id,e.innerHTML=`
                    <div class="notification-icon"><i class="bi ${t.icon}"></i></div>
                    <div class="notification-content">
                        <h5>${t.title}</h5>
                        <p>${t.description}</p>
                        <span class="notification-time">${t.time}</span>
                    </div>
                `,n.prepend(e),d.textContent=u+1;const l=document.querySelector(".activity-feed");if(l){const o=document.createElement("div");o.className="activity-item",o.innerHTML=`
                        <div class="activity-icon"><i class="bi ${t.icon}"></i></div>
                        <div class="activity-content">
                            <h5>${t.title}</h5>
                            <p>${t.description}</p>
                        </div>
                        <span class="activity-time">${t.time}</span>
                    `,l.prepend(o)}}).error(t=>{console.error("Channel Subscription Error:",t)}):console.warn("No authenticated user ID found. Skipping channel subscription.");const a=document.getElementById("notificationToggle"),i=document.getElementById("notificationDropdown");a&&i&&a.addEventListener("click",()=>{i.classList.toggle("active")});const r=document.getElementById("markAllRead");r&&r.addEventListener("click",()=>{fetch("/admin/notifications/mark-all-read",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success&&(document.querySelectorAll(".notification-item").forEach(n=>n.remove()),document.getElementById("notificationCount").textContent="0")}).catch(t=>console.error("Mark All Read Error:",t))});function s(){fetch("/admin/dashboard/stats").then(t=>t.json()).then(t=>{document.querySelector("#totalUsers .stat-value").textContent=t.totalUsers,document.querySelector("#totalUsers .stat-trend").className=`stat-trend ${t.userTrendStatus}`,document.querySelector("#totalUsers .stat-trend span").textContent=t.userTrendValue,document.querySelector("#totalTools .stat-value").textContent=t.totalTools,document.querySelector("#totalTools .stat-trend").className=`stat-trend ${t.toolTrendStatus}`,document.querySelector("#totalTools .stat-trend span").textContent=t.toolTrendValue,document.querySelector("#totalRevenue .stat-value").textContent=t.totalRevenue,document.querySelector("#totalRevenue .stat-trend").className=`stat-trend ${t.revenueTrendStatus}`,document.querySelector("#totalRevenue .stat-trend span").textContent=t.revenueTrendValue,document.querySelector("#contactCount .stat-value").textContent=t.contactCount,document.querySelector("#contactCount .stat-trend").className=`stat-trend ${t.contactTrendStatus}`,document.querySelector("#contactCount .stat-trend span").textContent=t.contactTrendValue}).catch(t=>console.error("Dashboard Stats Update Error:",t))}setInterval(s,3e4),s(),console.log("Echo Initialized:",window.Echo)});
